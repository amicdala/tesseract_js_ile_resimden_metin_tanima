<! –– 30.04.2020  Murat Karagöz    https://github.com/muratkaragoz/tesseract_js_ile_resimden_metin_tanima  ––>
<! –– This work is licensed under Apache License 2.0  ––>


<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8">
<title>Tesseract.js ile Resimden Metin Tanıma - Türkçe OCR(Optik Karakter Tanıma)</title>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

<! –– jQuery Eklentisi ––>
<script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.min.js"></script>

<! –– Bootstrap Teması ––>
<link rel="stylesheet" type="text/css" media="screen" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<! –– Bootstrap Dosya Seçici ––>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.8/js/fileinput.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.8/js/locales/tr.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.8/css/fileinput.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.1/js/plugins/piexif.min.js" type="text/javascript"></script>


<! –– Tesseract.js Resimden Metin Tanıma ––>
<script src="https://unpkg.com/tesseract.js@2.0.0/dist/tesseract.min.js" ></script>





</head>
<body>

<div class="container">



  <div class="row header">
    <div class="col-xs-12">
      <center><h3>Tesseract.js ile Resimden Metin Tanıma</h3> <h4>Türkçe OCR(Optik Karakter Tanıma)</h4></center>
    </div>
  </div>
  
  <hr/>
  <hr/>
   
  <div class="row">
  
  
  
  
  
    <div class="col-xs-6 first-column">
      

<select id="dil_sec" onchange="window.lastFile && recognizeFile(window.lastFile)">
<option value ='afr'> Afrikaans </option>
<option value ='ara'> Arapça </option>
<option value ='aze'> Azerice </option>
<option value ='bel'> Belarusça </option>
<option value ='ben'> Bengalce </option>
<option value = 'bul'> Bulgarca </option>
<option value = 'cat'> Katalanca </option>
<option value = 'ces'> Çekçe </option>
<option value = 'chi_sim'> Çince </option>
<option value = 'chi_tra'> Geleneksel Çince </option>
<option value ='chr'> Cherokee </option>
<option value = 'dan'> Danca </option>
<option value = 'deu'> Almanca </option>
<option value = 'ell'> Yunanca </option>
<option value = 'eng'> İngilizce </option>
<option value = 'enm'> İngilizce (Eski) </option>
<option value = 'meme'> İnternet Meme </option>
<option value = 'epo'> Esperanto </option>
<option value = 'epo_alt'> Esperanto alternatifi </option>
<option value = 'equ'> Matematik </option>
<option value ='est'> Estonca </option>
<option value ='eus'> Bask </option>
<option value ='fin'> Fince </option>
<option value = 'fra'> Fransızca </option>
<option value = 'frk'> Frenkçe </option>
<option value = 'frm'> Fransızca (Eski) </option>
<option value = 'glg'> Galiçyaca </option>
<option value = 'grc'> Eski Yunanca </option>
<option value = 'heb'> İbranice </option>
<option value = 'hin'> Hintçe </option>
<option value = 'hrv'> Hırvatça </option>
<option value = 'hun'> Macarca </option>
<option value ='ind'> Endonezya dili </option>
<option value = 'isl'> İzlandaca </option>
<option value = 'ita'> İtalyanca </option>
<option value = 'ita_old'> İtalyanca (Eski) </option>
<option value = 'jpn'> Japonca </option>
<option value = 'kan'> Kannada </option>
<option value = 'kor'> Korece </option>
<option value = 'lav'> Letonca </option>
<option value = 'lit'> Litvanca </option>
<option value ='mal'> Malayalam </option>
<option value ='mkd'> Makedonca </option>
<option value ='mlt'> Maltaca </option>
<option value ='msa'> Malayca </option>
<option value = 'nld'> Felemenkçe </option>
<option value ='ne'> Norveççe </option>
<option value = 'pol'> Lehçe </option>
<option value = 'por'> Portekizce </option>
<option value ='ron'> Rumence </option>
<option value = 'rus'> Rusça </option>
<option value = 'slk'> Slovakça </option>
<option value = 'slv'> Slovence </option>
<option value = 'spa'> İspanyolca </option>
<option value = 'spa_old'> Eski İspanyolca </option>
<option value ='sqi'> Arnavutça </option>
<option value = 'srp'> Sırpça (Latin) </option>
<option value = 'swa'> Svahili </option>
<option value = 'swe'> İsveççe </option>
<option value = 'tam'> Tamilce </option>
<option value = 'tel'> Telugu </option>
<option value ='tgl'> Tagalog </option>
<option value ='tha'> Tay dili </option>
<option value ='tur' selected> Türkçe </option>
<option value ='ukr'> Ukraynaca </option>
<option value = 'vie'> Vietnamca </option>
</select>
  
  

  
  
  
  <div class="file-loading">
    <input id="resim_sec" name="resim_sec" type="file"  capture="camera" accept="image/*" onchange="dosyayi_tani(window.lastFile=this.files[0])">
</div>
<script>
$("#resim_sec").fileinput({
    language: "tr",
'showUpload': false,
browseLabel: "Resim Seç",
browseClass: "btn btn-primary",
allowedFileTypes: ["image"],
maxFileCount: 1,
});
</script>

    </div>










    <div class="col-xs-6 second-column">

    
<br/>
 <div id="sonuc"></div>
 
    </div> 




  </div>
  <div class="row">
    
  </div>
</div>










<script>

function ilerlemeGuncelle(paket)
{
	if(paket.status == 'loading tesseract core')
	{
	paket.status = "Tesseract çekirdeği yükleniyor";
	}

	if(paket.status == 'initializing tesseract')
	{
	paket.status = "Tesseract başlatılıyor";
	}

	if(paket.status == 'initialized tesseract')
	{
	paket.status = "Tesseract başlatıldı";
	}

	if(paket.status == 'loading language traineddata')
	{
	paket.status = "Dil verileri yükleniyor";
	}

	if(paket.status == 'loaded language traineddata')
	{
	paket.status = "Dil verileri yüklendi";
	}

	if(paket.status == 'initializing api')
	{
	paket.status = "API başlatılıyor";
	}

	if(paket.status == 'initialized api')
	{
	paket.status = "API başlatıldı";
	}

	if(paket.status == 'recognizing text')
	{
	paket.status = "Metin tanınıyor";
	}

	if(paket.status == 'done')
	{
	paket.status = "Bitti";
	}


	var log = document.getElementById('sonuc');

	if(log.firstChild && log.firstChild.durum === paket.status)
	{
		if('progress' in paket){
		var ilerleme = log.firstChild.querySelector('progress')
		ilerleme.style.cssText = 'width:100%;'
		ilerleme.value = paket.progress
	}
	}

	else
	{

	var satir = document.createElement('div');
	satir.style.cssText = 'width:100%;'
	satir.durum = paket.status;
	var durum = document.createElement('div')
	durum.style.cssText = 'width:100%;'
	durum.className = 'status'
	durum.appendChild(document.createTextNode(paket.status))
	satir.appendChild(durum)

	if('progress' in paket)
	{
		var ilerleme = document.createElement('progress')
		ilerleme.style.cssText = 'width:100%;'
		ilerleme.value = paket.progress
		ilerleme.max = 1
		satir.appendChild(ilerleme)
	}


	if(paket.status == 'Bitti')
	{
		var metin_alani = document.createElement('textarea')
		metin_alani.style.cssText = 'width:100%;height:320px'
		metin_alani.appendChild(document.createTextNode(paket.data.data.text))
		satir.innerHTML = ''
		satir.appendChild(metin_alani);
	}

	log.insertBefore(satir, log.firstChild)
	}
	}

	async function dosyayi_tani(file) 
	{
	  document.querySelector("#sonuc").innerHTML = ''
	  const dil = document.querySelector('#dil_sec').value
	  const data = await Tesseract.recognize(file, dil, 
	  {
		logger: ilerlemeGuncelle,
	  });
	  ilerlemeGuncelle({ status: 'Bitti', data });
	}
</script>


</body>
</html>
